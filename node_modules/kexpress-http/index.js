module.exports = {
    RequestChecker: require('./src/request-checker').RequestChecker
};

// module.exports = require('./src');

// function xxx(value) {
//     return new Promise((resolve, reject) => {
//         console.log('executing');
//         if ( value === 1 ) {
//             resolve(2222);
//         }
//         else {
//             reject('Value not equals 1');
//         }
//     });
// }

// function xxx(value, next) {
//     console.log('executing');
//     if ( value === 1 ) {
//         next(null, 2222);
//     }
//     else {
//         next('Value not equals 1');
//     }
// }

// async function check(value) {
//     function next(err, result) {
//         if ( err ) {
//             console.log(`Error: ${err}`);

//             return;
//         }

//         console.log(result);
//     }

//     try {
//         const argCount = xxx.length;
//         if ( argCount === 1 ) {
//             let result = xxx(value);

//             if ( result instanceof Promise ) {
//                 result = await result;
//             }

//             next(null, result);
//         }
//         else if ( argCount === 2 ) {
//             xxx(value, next);
//         }
//         else {
//             throw new Error('The arguments count must be 1 or 2');
//         }
//     }
//     catch (e) {
//         next(e);
//     }
// }

// async function main() {
//     try {
//         await check(1);
//         await check(2);
//     }
//     catch (e) {
//         console.log(e);
//     }
// }

// main();

// const RequestChecker = require('./src/request-checker').RequestChecker;

// async function main() {
//     const rules = {
//         body: {
//             type: 'object',
//             required: true,
//             properties: {
//                 loginName: 'string*',
//                 password: 'string*',
//                 role: {
//                     type: 'object',
//                     required: true,
//                     properties: {
//                         name: 'string*',
//                         comment: 'string',
//                         privileges: {
//                             type: 'array',
//                             required: true,
//                             items: {
//                                 type: 'object',
//                                 properties: {
//                                     name: 'string*',
//                                     comment: 'string'
//                                 }
//                             }
//                         }
//                     }
//                 }
//             }
//         }
//     };

//     const req = {
//         body: {
//             loginName: 'kinuxroot',
//             password: 123456,
//             role: {
//                 name: 'admin',
//                 comment: 111,
//                 privileges: [{
//                     name: 'manage_user',
//                     comment: '用户管理员'
//                 }, {
//                 }]
//             }
//         }
//     };

//     const checker = new RequestChecker((req, res, error) => {
//         console.log(error);
//     });

//     await checker.handle(req, {}, rules);
// }

// main();